(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{506:function(e,t,p){e.exports=p.p+"assets/img/duns-request.1049429c.png"},507:function(e,t,p){e.exports=p.p+"assets/img/ios-dev-register.38fc985e.png"},545:function(e,t,p){"use strict";p.r(t);var r=p(6),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"ios-app-发布准备"}},[e._v("iOS App 发布准备")]),e._v(" "),r("h2",{attrs:{id:"申请-apple-开发者账号"}},[e._v("申请 Apple 开发者账号")]),e._v(" "),r("h3",{attrs:{id:"申请-d-u-n-s-编号"}},[e._v("申请 D-U-N-S 编号")]),e._v(" "),r("p",[e._v('如果 App 需要在 App Store 上发布，那么建议申请 "以组织身份注册" 的类型。如果选择以组织身份注册，还需要先为您的企业或组织申请 D-U-N-S (邓白氏) 码，请按照 '),r("a",{attrs:{href:"https://developer.apple.com/enroll/duns-lookup/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.apple.com/enroll/duns-lookup/"),r("OutboundLink")],1),e._v(" 的指引完成申请。如果企业资质健全，一般都能申请成功，通常 D-U-N-S 的申请需要几天时间完成。")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"title"},[e._v("提示")]),r("p",[e._v("注册 D-U-N-S 需要提供如下信息以及联系人信息")])]),r("p",[r("img",{attrs:{src:p(506),alt:"duns-request"}})]),e._v(" "),r("p",[e._v("提交在线申请后，如果申请人是中国境内的组织实体，可能会收到 D & B 的国内代理公司 (上海华夏邓白氏商业信息咨询有限公司) 发来的邮件，要求签署邮件附件中的确认知悉函，并提供以下信息")]),e._v(" "),r("ul",[r("li",[e._v("公司清晰的营业执照正本（或副本）照片和公司公章刻字面的实物照片（如是事业单位请提供事业单位法人证）")]),e._v(" "),r("li",[e._v("公司中文名称（工商注册的中文名，如有更名情况，请同时提供更名前和更名后的名称）、英文名（如无正式的英文名按字面翻译）")]),e._v(" "),r("li",[e._v("中文办公地址、英文办公地址")]),e._v(" "),r("li",[e._v("邮编")]),e._v(" "),r("li",[e._v("企业类型")]),e._v(" "),r("li",[e._v("是否是独立企业（公司有无分公司或办事处，只需填有或无）")]),e._v(" "),r("li",[e._v("公司英文简称或英文商标（如果没有可以填无）")]),e._v(" "),r("li",[e._v("主营业务（一个最主要的业务）")]),e._v(" "),r("li",[e._v("员工人数（请尽量精确,例:10人；不要填区间,例：10-20人）")]),e._v(" "),r("li",[e._v("本项目联系人（务必填写申请公司的本项目联系人），包括姓名、 性别、 职务和电话（公司座机和联系人手机，所提供座机和办公地址保持一致）")])]),e._v(" "),r("h3",{attrs:{id:"完成苹果开发者注册"}},[e._v("完成苹果开发者注册")]),e._v(" "),r("p",[e._v("以组织身份注册苹果开发者，需要在获得 D-U-N-S 编号后，才可以继续完成注册，需要提供如下信息")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"title"},[e._v("提示")]),r("p",[e._v("苹果开发者的注册地址是 "),r("a",{attrs:{href:"https://developer.apple.com/programs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.apple.com/programs/"),r("OutboundLink")],1),e._v("，网站上有详细的流程介绍。")])]),r("p",[r("img",{attrs:{src:p(507),alt:"ios-dev-register"}})]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"title"},[e._v("提示")]),r("p",[e._v("开发者账号注册好之后，才可以进行后续步骤。")])]),r("h2",{attrs:{id:"常用网站"}},[e._v("常用网站")]),e._v(" "),r("ul",[r("li",[e._v("Apple 开发者网站 - "),r("a",{attrs:{href:"https://developer.apple.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.apple.com"),r("OutboundLink")],1),e._v("， 管理 App ID，签名证书，Provisioning Profile 等")]),e._v(" "),r("li",[e._v("App Store Connect 网站 - "),r("a",{attrs:{href:"https://appstoreconnect.apple.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://appstoreconnect.apple.com"),r("OutboundLink")],1),e._v("，管理 App，Test Flight 测试版本，用户等")]),e._v(" "),r("li",[e._v("Apple ID 管理网站 - "),r("a",{attrs:{href:"https://appleid.apple.com/cn",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://appleid.apple.com/cn"),r("OutboundLink")],1),e._v("，管理开发者的 Apple ID，需要在里边创建 App specific password，在上传 ipa 文件的命令中需要使用")])]),e._v(" "),r("h2",{attrs:{id:"创建-app-id"}},[e._v("创建 App ID")]),e._v(" "),r("p",[e._v("在 "),r("a",{attrs:{href:"https://developer.apple.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.apple.com"),r("OutboundLink")],1),e._v(" 网站为 App 创建一个 App ID，创建 App ID 是为了创建 Bundle ID （PRODUCT_BUNDLE_IDENTIFIER）。如果在 Xcode 工程中使用 xcconfig，则 release build 的 xcconfig 中可以设置 "),r("code",[e._v('PRODUCT_BUNDLE_IDENTIFIER = "创建 App ID 时指定的 Bundle ID"。')])]),e._v(" "),r("h2",{attrs:{id:"创建-ios-distribution-证书"}},[e._v("创建 iOS Distribution 证书")]),e._v(" "),r("p",[e._v("这个证书用于 Xcode 编译过程中为生成的 ipa 文件签名，如果还没有创建该证书，则可以使用 Xcode 创建该证书。创建的方法是进入到 Xcode > Preferences > Accounts > Manage Certificates…, 点 + 号，选择 iOS Distribution。")]),e._v(" "),r("p",[e._v("创建出来后，可以在主机的 Keychain Access 应用中将该证书导出为一个 .p12 文件备用，一般需要将这个证书再安装到编译服务器上去。")]),e._v(" "),r("h2",{attrs:{id:"创建-ios-provisioning-profiles-distribution"}},[e._v("创建 iOS Provisioning Profiles (Distribution)")]),e._v(" "),r("p",[e._v("在 "),r("a",{attrs:{href:"https://developer.apple.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.apple.com"),r("OutboundLink")],1),e._v(" 网站为 App 创建一个 iOS Provisioning Profiles (Distribution)，这个文件也是在 Xcode 编译时使用。创建时，需要选择已经创建好的 App ID，以及 iOS Distribution 证书。创建好的 iOS Provisioning Profiles (Distribution) 文件可以下载下来，安装到编译服务器上。")]),e._v(" "),r("h2",{attrs:{id:"配置-release-xcconfig-文件"}},[e._v("配置 release xcconfig 文件")]),e._v(" "),r("p",[e._v("建议在工程中使用 release xcconfig 文件，可以在该文件中配置好以下几项配置。在工程的 Build Settings 中将相应的属性设置为对应的参数。如将 Provisioning Profile > Release 设置为 "),r("code",[e._v("${PROVISIONING_PROFILE_SPECIFIER}")]),e._v("，将 Packaging > Product Bundle Identifier > Release 设置为  "),r("code",[e._v("${PRODUCT_BUNDLE_IDENTIFIER}")]),e._v(" 以此类推。")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("PRODUCT_BUNDLE_IDENTIFIER "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" 创建 App ID 时指定的 Bundle ID\nPRODUCT_NAME "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" 应用名字\nDEVELOPMENT_TEAM "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" 开发者 Team ID 号码，在 developer.apple.com 查看账号信息可以查到  \nCODE_SIGN_IDENTITY "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" 签名证书 ID，查看签名证书属性可以查到 \nPROVISIONING_PROFILE_SPECIFIER "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" iOS Provisioning Profiles "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Distribution"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" 的名字\n")])])]),r("h2",{attrs:{id:"在-app-store-connect-创建应用"}},[e._v("在 App Store Connect 创建应用")]),e._v(" "),r("p",[e._v("在 App Store Connect 网站中创建一个新的 iOS App，创建应用时选择之前创建的 Bundle ID。只有创建 App 后才可以上传改应用的 ipa 文件。")]),e._v(" "),r("h2",{attrs:{id:"编译-release-版本应用-ipa-文件并将其上传到-app-store-connect"}},[e._v("编译 Release 版本应用 ipa 文件并将其上传到 App Store Connect")]),e._v(" "),r("p",[e._v("建议在编译服务器通过命令行方式编译用于发布的 ipa 文件，然后通过命令行进行上传。可以使用 Jenkins 等 CI/CD 工具，将这一过程自动化。编译命令和上传命令示例如下")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("xcodebuild -target "),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${TARGET}")]),e._v(" -configuration Release -project "),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${PROJECT_FILE}")]),e._v("\nxcrun altool --upload-app -f ./release/"),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${RELEASE_IPA_FILE}")]),e._v(" -u "),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${USER_APPLE_ID}")]),e._v(" -p "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${APP_SPECIFIC_PASSWORD}")]),e._v('"')]),e._v("\n")])])]),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"title"},[e._v("提示")]),r("p",[e._v("苹果现在要求 altool 命令中不能再使用用户的登录密码，而需要使用 App Specific Password，这个密码需要在 Apple ID 管理网站中创建")])]),r("h2",{attrs:{id:"通过-test-flight-安装-app-测试"}},[e._v("通过 Test Flight 安装 App 测试")]),e._v(" "),r("p",[e._v("Test Flight 是苹果推荐的 App 发布前的测试和 Beta 手段， ipa 上传到 App Store Connect 后，测试人员可以通过 Test Flight 安装新上传的 App，进行必要的测试。有关 Test Flight 的使用方法可以参考 "),r("a",{attrs:{href:"https://developer.apple.com/testflight/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.apple.com/testflight/"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"提交审核"}},[e._v("提交审核")]),e._v(" "),r("p",[e._v("新版本应用通过测试后，可以将其提交审核。在 "),r("a",{attrs:{href:"https://appstoreconnect.apple.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://appstoreconnect.apple.com"),r("OutboundLink")],1),e._v(" 网站上提供必要的信息，然后提交审核即可。苹果一般几天后开始审核，如果审核成功，则 App 可以发布到 App Store。如果审核失败，苹果会提供反馈信息，说明审核失败的原因，需要根据反馈进行必要的修改或者同审核人员进行必要的沟通。可以参考苹果文档 "),r("a",{attrs:{href:"https://help.apple.com/app-store-connect/#/dev34e9bbb5a",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://help.apple.com/app-store-connect/#/dev34e9bbb5a"),r("OutboundLink")],1),e._v(" 查看更详细的说明。")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"title"},[e._v("提示")]),r("p",[e._v("苹果现在要求所有应用需要提供《隐私协议》链接，需要将准备好的《隐私协议》放到公司网站后，将地址链接填入 App 审核申请中对应的空格。")]),e._v(" "),r("p",[e._v("另外，有时苹果要求提供 App 使用的 Demo 视频，建议录制一个 Demo 视频，在申请表中提供视频的地址链接。")])])])}),[],!1,null,null,null);t.default=s.exports}}]);